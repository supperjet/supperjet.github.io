<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="在上一节中我们介绍了速度的基本概念，包括沿坐标轴的速度，和更普适的任意方向的速度，在文章的最后我们做了一个鼠标跟随的示例，以及通过改变物体的rotation属性做了一个关于速度的扩展。通过上一节的学习你会发现在速度的作用下物体可以沿着任意方向运动了。但这还远远不够，因为我们的物体都是在做匀速运动。既然有匀速运动，当然就有变速运动喽！这一节我们介绍本章的另一个重要内容加速度。 1.加速度基本概念以">
<meta name="keywords" content="canvas">
<meta property="og:type" content="article">
<meta property="og:title" content="每周一点canvas动画--加速度">
<meta property="og:url" content="http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/index.html">
<meta property="og:site_name" content="一只会飞的鱼">
<meta property="og:description" content="在上一节中我们介绍了速度的基本概念，包括沿坐标轴的速度，和更普适的任意方向的速度，在文章的最后我们做了一个鼠标跟随的示例，以及通过改变物体的rotation属性做了一个关于速度的扩展。通过上一节的学习你会发现在速度的作用下物体可以沿着任意方向运动了。但这还远远不够，因为我们的物体都是在做匀速运动。既然有匀速运动，当然就有变速运动喽！这一节我们介绍本章的另一个重要内容加速度。 1.加速度基本概念以">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce.jpg?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104752&Signature=sm0GnCOw5XbNEHIj%2F7%2FKDG1cEos%3D">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce1.PNG?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104813&Signature=jkC7A6zxc5OGVM3rzd6lUaQ1NpI%3D">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce1.PNG?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104813&Signature=jkC7A6zxc5OGVM3rzd6lUaQ1NpI%3D">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce3.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104903&Signature=yTa0hZM%2FQfX5rQ80k3UnwDClUlg%3D">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce4.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104941&Signature=Gbe%2BklbMqGB7Y0O5A3Fvm1wTC3A%3D">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce5.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104981&Signature=WEZWMBrOEkM2WDqsLeq6y8CNvkk%3D">
<meta property="og:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce5.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104981&Signature=WEZWMBrOEkM2WDqsLeq6y8CNvkk%3D">
<meta property="og:updated_time" content="2017-08-19T01:11:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="每周一点canvas动画--加速度">
<meta name="twitter:description" content="在上一节中我们介绍了速度的基本概念，包括沿坐标轴的速度，和更普适的任意方向的速度，在文章的最后我们做了一个鼠标跟随的示例，以及通过改变物体的rotation属性做了一个关于速度的扩展。通过上一节的学习你会发现在速度的作用下物体可以沿着任意方向运动了。但这还远远不够，因为我们的物体都是在做匀速运动。既然有匀速运动，当然就有变速运动喽！这一节我们介绍本章的另一个重要内容加速度。 1.加速度基本概念以">
<meta name="twitter:image" content="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce.jpg?OSSAccessKeyId=LTAIkU9IYC0zIU2B&Expires=1863104752&Signature=sm0GnCOw5XbNEHIj%2F7%2FKDG1cEos%3D">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>每周一点canvas动画--加速度</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/js/">JS</a></li>
         
          <li><a href="/tags/canvas/">Canvas</a></li>
         
          <li><a href="/tags/webgl/">Webgl</a></li>
         
          <li><a href="/tags/vue/">Vue</a></li>
         
          <li><a href="/tags/react/">React</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/08/19/vue双向绑定/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2017/08/18/每周一点canvas动画-速度/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&text=每周一点canvas动画--加速度"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&is_video=false&description=每周一点canvas动画--加速度"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=每周一点canvas动画--加速度&body=Check out this article: http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&name=每周一点canvas动画--加速度&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-加速度基本概念"><span class="toc-number">1.</span> <span class="toc-text">1.加速度基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-沿坐标轴的加速度"><span class="toc-number">2.</span> <span class="toc-text">2.沿坐标轴的加速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-任意方向的加速度"><span class="toc-number">3.</span> <span class="toc-text">3.任意方向的加速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-重力加速度"><span class="toc-number">4.</span> <span class="toc-text">4.重力加速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-太空船"><span class="toc-number">5.</span> <span class="toc-text">5.太空船</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        每周一点canvas动画--加速度
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">一只会飞的鱼</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-08-19T01:03:47.000Z" itemprop="datePublished">2017-08-19</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/canvas/">canvas</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce.jpg?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104752&amp;Signature=sm0GnCOw5XbNEHIj%2F7%2FKDG1cEos%3D" alt=""></p>
<p>在上一节中我们介绍了速度的基本概念，包括<code>沿坐标轴的速度</code>，和更普适的<code>任意方向的速度</code>，在文章的最后我们做了一个<code>鼠标跟随</code>的示例，以及通过改变物体的<code>rotation</code>属性做了一个关于速度的扩展。通过上一节的学习你会发现在速度的作用下物体可以沿着任意方向运动了。但这还远远不够，因为我们的物体都是在做<code>匀速运动</code>。既然有<code>匀速运动</code>，当然就有<code>变速运动</code>喽！这一节我们介绍本章的另一个重要内容<code>加速度</code>。</p>
<h2 id="1-加速度基本概念"><a href="#1-加速度基本概念" class="headerlink" title="1.加速度基本概念"></a>1.加速度基本概念</h2><p>以防有的同学把物理知识都还给老师了！在这我先废话的介绍下加速度是什么，好吧！就一句话，加速度是<strong>描述物体速度变化快慢的物理量</strong>。我们知道速度是表征物体运动快慢的物理量，这里加速度是来表征速度的变化的。用物理上的<code>时间/速度</code>图来表示就是这个样子：</p>
<p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce1.PNG?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104813&amp;Signature=jkC7A6zxc5OGVM3rzd6lUaQ1NpI%3D" alt=""></p>
<p>从图中我们可以看到，匀速运动的速度是一直保持不变的，而变速运动的速速是随着时间变化的。如图所示，这里展示了一个匀加速运动，在Δt的时间内，速度增加了Δv，那么<code>加速度</code>用公式就可以表示为 <code>a= Δv / Δt</code>。ok！恶心的物理公式就此打住吧！下面我们来看看在代码中是如何实现的吧。</p>
<h2 id="2-沿坐标轴的加速度"><a href="#2-沿坐标轴的加速度" class="headerlink" title="2.沿坐标轴的加速度"></a>2.沿坐标轴的加速度</h2><p>我们首先定义速度和加速度，然后，在动画循环中让速度每一帧都加上加速度，这样每一帧速度的值都在增加，球的位置相对来说每一帧就会增加的越来越多，反映到动画中就是运动的越来越块。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;canvas id=<span class="string">"canvas"</span> width=<span class="string">"500"</span> height=<span class="string">"500"</span> style=<span class="string">"background:#000;"</span>&gt;</div><div class="line">       your browser not support canvas</div><div class="line">   &lt;<span class="regexp">/canvas&gt;</span></div><div class="line"><span class="regexp">   &lt;script src="../</span>js/ball.js<span class="string">"&gt;&lt;/script&gt; //引入工具函数文件</span></div><div class="line"><span class="string">   &lt;script src="</span>../js/utils.js<span class="string">"&gt;&lt;/script&gt; //引入球类</span></div><div class="line"><span class="string">   &lt;script&gt;</span></div><div class="line"><span class="string">       window.onload = function()&#123;</span></div><div class="line"><span class="string">           var canvas = document.****getElementById("</span>canvas<span class="string">");</span></div><div class="line"><span class="string">           var context = canvas.getContext("</span><span class="number">2</span>d<span class="string">");</span></div><div class="line"><span class="string">           </span></div><div class="line"><span class="string">           var ball = new Ball(20);</span></div><div class="line"><span class="string">           ball.x = canvas.width/6;</span></div><div class="line"><span class="string">           ball.y = canvas.height/6;</span></div><div class="line"><span class="string">           </span></div><div class="line"><span class="string">           var vx = 0, ax = 0.1; //定义初始速度vx, 定义加速度a</span></div><div class="line"><span class="string">           (function drawFrame()&#123;</span></div><div class="line"><span class="string">               window.requestAnimationFrame(drawFrame, canvas);</span></div><div class="line"><span class="string">               context.clearRect(0,0,canvas.width,canvas.height);</span></div><div class="line"><span class="string">               </span></div><div class="line"><span class="string">               vx += ax; //速度每一帧都加上加速度的值</span></div><div class="line"><span class="string">               ball.x += vx;</span></div><div class="line"><span class="string">               ball.draw(context);</span></div><div class="line"><span class="string">           &#125;());</span></div><div class="line"><span class="string">       &#125;</span></div><div class="line"><span class="string">    &lt;/script&gt;</span></div></pre></td></tr></table></figure>
<p>为了效果更加突出，这里放上了匀速运动的图片，与加速运动的图片做了一个对比。在示例代码中小球的运动方向沿着X轴，当然你也可以沿着Y轴，或者两者同时。当你在X轴和Y轴同时定义了加速度，你会发现和任意方向的速度一样，小球会沿着两者合速度的方向移动，这就引出了我们的下一部分–任意方向的加速度。</p>
<p><strong>匀速运动</strong></p>
<p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce1.PNG?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104813&amp;Signature=jkC7A6zxc5OGVM3rzd6lUaQ1NpI%3D" alt=""></p>
<p><strong>加速运动</strong></p>
<p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce3.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104903&amp;Signature=yTa0hZM%2FQfX5rQ80k3UnwDClUlg%3D" alt=""></p>
<h2 id="3-任意方向的加速度"><a href="#3-任意方向的加速度" class="headerlink" title="3.任意方向的加速度"></a>3.任意方向的加速度</h2><p>有了前一节关于任意方向速度的铺垫，这里就变得很简单了，加速度同样可以像速度那样合成分解。这里我们假设要让小球沿着30度的方向做加速度为0.05的加速运动，具体代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">window.onload = <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">           var canvas = document.getElementById(<span class="string">"canvas"</span>);</div><div class="line">           var context = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">           </div><div class="line">           var ball = new Ball(20);</div><div class="line">           ball.x = 0;</div><div class="line">           ball.y = 0;</div><div class="line">           </div><div class="line">           var vx = 0, vy = 0, //初始速度为0</div><div class="line">               ax = 0, ay = 0, //分加速度为0</div><div class="line">               angle = 30, //运动方向</div><div class="line">               aTotal = 0.05; // 定义加速度的大小</div><div class="line">           </div><div class="line">           (<span class="keyword">function</span> <span class="function"><span class="title">drawFrame</span></span>()&#123;</div><div class="line">               window.requestAnimationFrame(drawFrame, canvas);</div><div class="line">               context.clearRect(0,0,canvas.width,canvas.height);</div><div class="line">               </div><div class="line">               //加速度分解</div><div class="line">               ax = Math.cos(30 * Math.PI/180)*aTotal;</div><div class="line">               ay = Math.sin(30 * Math.PI/180)*aTotal;</div><div class="line">               </div><div class="line">               vx += ax;</div><div class="line">               vy += ay;</div><div class="line">         </div><div class="line">               ball.x += vx;</div><div class="line">               ball.y += vy;</div><div class="line">               ball.draw(context);</div><div class="line">           &#125;());</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<p>具体效果如下图所示：</p>
<p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce4.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104941&amp;Signature=Gbe%2BklbMqGB7Y0O5A3Fvm1wTC3A%3D" alt=""></p>
<p>与任意方向速度的概念一样，我们设定加速度的大小，以及物体运动的方向。然后再动画循环中，将加速度分解到水平和垂直两个方向，然后让水平速度和垂直速度在每一帧都加上相对应的加速度值，我们就可以得到一个沿任意方向加速(减速)运行的小球。</p>
<h2 id="4-重力加速度"><a href="#4-重力加速度" class="headerlink" title="4.重力加速度"></a>4.重力加速度</h2><p>在这一部分我们介绍加速度中比较特别的一个 —— 重力加速度。重力加速度其实是由两个物体间的引力形成的，到后面我们专门会有一个章节来介绍万有引力，并且将它运用于我们的动画之中。</p>
<p>对于这个特殊的加速度，我相信你对它应该不会感到陌生，因为在中学的课本中<code>G</code>这个符号不知道出现了多少次。我们需要知道的是，在地球上，任何一个物体从空中下落到地面，它都有一个竖直向下的加速度。</p>
<p>ok！代码时间，我们的题目是：<code>小球从空中自由降落至地面，然后弹起，循环往复，直到它最终速度为零停留在地面</code>。好吧！这次我们先看模拟出来的效果：</p>
<p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce5.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104981&amp;Signature=WEZWMBrOEkM2WDqsLeq6y8CNvkk%3D" alt=""></p>
<p>具体代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">           <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</div><div class="line">           <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">           </div><div class="line">           <span class="keyword">var</span> ball = <span class="keyword">new</span> Ball(<span class="number">20</span>, <span class="string">"red"</span>);</div><div class="line">               ball.x = canvas.width/<span class="number">2</span></div><div class="line">               ball.y = canvas.height/<span class="number">2</span> - <span class="number">200</span>;</div><div class="line">               </div><div class="line">           <span class="keyword">var</span> vy = <span class="number">0</span>,  <span class="comment">//初始速度</span></div><div class="line">                gravity = <span class="number">0.2</span>, <span class="comment">//定义重力加速度</span></div><div class="line">                bounce = <span class="number">-0.8</span>; <span class="comment">//定义反弹系数</span></div><div class="line">                </div><div class="line">           <span class="comment">//碰撞检测</span></div><div class="line">           <span class="function"><span class="keyword">function</span> <span class="title">checkGround</span>(<span class="params">ball</span>)</span>&#123;</div><div class="line">               <span class="keyword">if</span>(ball.y + ball.radius &gt; canvas.height)&#123;</div><div class="line">                   ball.y = canvas.height - ball.radius;</div><div class="line">                   vy *= bounce; <span class="comment">//速度反向并且减小</span></div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line"></div><div class="line">           (<span class="function"><span class="keyword">function</span> <span class="title">drawFramw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              <span class="built_in">window</span>.requestAnimationFrame(drawFramw, canvas);</div><div class="line">              context.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">              </div><div class="line">              vy += gravity;</div><div class="line">              ball.y += vy;</div><div class="line">              </div><div class="line">              <span class="comment">//碰撞检测</span></div><div class="line">              checkGround(ball);</div><div class="line">              ball.draw(context);</div><div class="line">           &#125;());</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>在这段代码中，除了本章介绍的内容，还包括部分下一章会介绍的内容，但是以你们的聪明才智我相信这完全是小菜一碟，对吧！我们在初始化阶段定义了在Y轴方向的初始速度<code>vy</code>, 还有重力加速度<code>gravity</code>, 以及一个反弹系数<code>bounce</code>。这里面我们做了一个简单的碰撞检测，当小球下落到地面(也就是canvas画布的底部)，它的位置为 <code>canvas.height - ball.radius</code>，并且此时速度反弹，方向向上。然后再循环动画中调用碰撞检测函数，这样就出现了落地反弹的效果，至于为什么会最后停留在地面上，那是因为<code>bounce</code>是个小数，每碰撞一次<code>vy</code> 都会减小。好了，这只是一个简单的动画，我就不费嘴皮子了。</p>
<h2 id="5-太空船"><a href="#5-太空船" class="headerlink" title="5.太空船"></a>5.太空船</h2><p>在这个实例中我们要达到的效果是：<strong>通过键盘上的方向键控制太空船朝着不同的方向运动</strong>。在这里我们需要新建一个<code>spaceShip.js</code>类文件，ship.js文件的代码如下, 当然，你也可以去代码库中寻找。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SpaceShip</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = <span class="number">0</span>;</div><div class="line">  <span class="keyword">this</span>.y = <span class="number">0</span>;</div><div class="line">  <span class="keyword">this</span>.width = <span class="number">25</span>;</div><div class="line">  <span class="keyword">this</span>.height = <span class="number">25</span>;</div><div class="line">  <span class="keyword">this</span>.rotation = <span class="number">0</span>;</div><div class="line">  <span class="keyword">this</span>.showFlame = <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">SpaceShip.prototype.draw = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>)</span>&#123;</div><div class="line">    context.save();</div><div class="line">    context.beginPath();</div><div class="line">    context.translate(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</div><div class="line">    context.rotate(<span class="keyword">this</span>.rotation);</div><div class="line">    context.strokeStyle = <span class="string">"#ffffff"</span>;</div><div class="line">    context.moveTo(<span class="number">10</span>, <span class="number">0</span>);</div><div class="line">    context.lineTo(<span class="number">-10</span>, <span class="number">10</span>);</div><div class="line">    context.lineTo(<span class="number">-5</span>, <span class="number">0</span>);</div><div class="line">    context.lineTo(<span class="number">-10</span>, <span class="number">-10</span>);</div><div class="line">    context.lineTo(<span class="number">10</span>, <span class="number">0</span>);</div><div class="line">    context.closePath();</div><div class="line">    context.stroke();</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.showFlame == <span class="literal">true</span>)&#123;</div><div class="line">        context.save()</div><div class="line">        context.beginPath();</div><div class="line">        context.strokeStyle = <span class="string">"#f69"</span>;</div><div class="line">        context.moveTo(<span class="number">-7.5</span>, <span class="number">-5</span>);</div><div class="line">        context.lineTo(<span class="number">-15</span>, <span class="number">0</span>);</div><div class="line">        context.lineTo(<span class="number">-7.5</span>, <span class="number">5</span>);</div><div class="line">        context.stroke();</div><div class="line">        context.restore();</div><div class="line">    &#125;</div><div class="line">    context.restore();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果图如下：</p>
<p><img src="http://zyf-img.oss-cn-beijing.aliyuncs.com/Myblog%2Fpic%2Facce5.gif?OSSAccessKeyId=LTAIkU9IYC0zIU2B&amp;Expires=1863104981&amp;Signature=WEZWMBrOEkM2WDqsLeq6y8CNvkk%3D" alt=""></p>
<p>具体代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">&lt;canvas id=<span class="string">"canvas"</span> width=<span class="string">"1000"</span> height=<span class="string">"500"</span> style=<span class="string">"background:#000;"</span>&gt;</div><div class="line">      your browser not support canvas</div><div class="line">  &lt;<span class="regexp">/canvas&gt;</span></div><div class="line"><span class="regexp">  &lt;script src="../</span>js/utils.js<span class="string">"&gt;&lt;/script&gt;</span></div><div class="line"><span class="string">  &lt;script src="</span>../js/spaceship.js<span class="string">"&gt;&lt;/script&gt;</span></div><div class="line"><span class="string">   &lt;script&gt;</span></div><div class="line"><span class="string">     window.onload = function()&#123;</span></div><div class="line"><span class="string">         var canvas = document.getElementById('canvas'),</span></div><div class="line"><span class="string">             context = canvas.getContext('2d');</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">         var spaceShip = new SpaceShip();</span></div><div class="line"><span class="string">             spaceShip.x = canvas.width/2;</span></div><div class="line"><span class="string">             spaceShip.y = canvas.height/2;</span></div><div class="line"><span class="string">         </span></div><div class="line"><span class="string">        //初始化</span></div><div class="line"><span class="string">         var vr = 0,</span></div><div class="line"><span class="string">             vx = 0,</span></div><div class="line"><span class="string">             vy = 0,</span></div><div class="line"><span class="string">             ax = 0,</span></div><div class="line"><span class="string">             ay = 0,</span></div><div class="line"><span class="string">             angle = 0,</span></div><div class="line"><span class="string">             thrust = 0;</span></div><div class="line"><span class="string">             </span></div><div class="line"><span class="string">         //通过方向键控制各变量的值</span></div><div class="line"><span class="string">         window.addEventListener('keydown',function(event)&#123;</span></div><div class="line"><span class="string">             switch (event.keyCode)&#123;</span></div><div class="line"><span class="string">                 case 37:    //left</span></div><div class="line"><span class="string">                     vr = -3;</span></div><div class="line"><span class="string">                     vx = 0;</span></div><div class="line"><span class="string">                     vy = 0;</span></div><div class="line"><span class="string">                     break;</span></div><div class="line"><span class="string">                 case 39:  //right</span></div><div class="line"><span class="string">                     vr = 3;</span></div><div class="line"><span class="string">                     vx = 0;</span></div><div class="line"><span class="string">                     vy = 0;</span></div><div class="line"><span class="string">                     break;</span></div><div class="line"><span class="string">                 case 38: //up</span></div><div class="line"><span class="string">                     spaceShip.showFlame = true;</span></div><div class="line"><span class="string">                     thrust = 0.05;</span></div><div class="line"><span class="string">                     break;</span></div><div class="line"><span class="string">                 case 40:</span></div><div class="line"><span class="string">                     ax = 0;</span></div><div class="line"><span class="string">                     ay = 0;</span></div><div class="line"><span class="string">                     vx = 0;</span></div><div class="line"><span class="string">                     vy = 0;</span></div><div class="line"><span class="string">                     break;</span></div><div class="line"><span class="string">             &#125;</span></div><div class="line"><span class="string">         &#125;, false);</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">         window.addEventListener('keyup', function(event)&#123;</span></div><div class="line"><span class="string">              vr = 0;</span></div><div class="line"><span class="string">              thrust = 0;</span></div><div class="line"><span class="string">              spaceShip.showFlame = false;</span></div><div class="line"><span class="string">         &#125;, false);</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">         (function drawFrame()&#123;</span></div><div class="line"><span class="string">             window.requestAnimationFrame(drawFrame, canvas);</span></div><div class="line"><span class="string">             context.clearRect(0, 0, canvas.width, canvas.height);</span></div><div class="line"><span class="string">             </span></div><div class="line"><span class="string">             //角度</span></div><div class="line"><span class="string">             spaceShip.rotation += vr *Math.PI/180;</span></div><div class="line"><span class="string">             </span></div><div class="line"><span class="string">             angle = spaceShip.rotation;</span></div><div class="line"><span class="string">             ax = Math.cos(angle)*thrust;</span></div><div class="line"><span class="string">             ay = Math.sin(angle)*thrust;</span></div><div class="line"><span class="string">             </span></div><div class="line"><span class="string">             vx += ax;</span></div><div class="line"><span class="string">             vy += ay;</span></div><div class="line"><span class="string">         </span></div><div class="line"><span class="string">             spaceShip.x += vx;</span></div><div class="line"><span class="string">             spaceShip.y += vy;</span></div><div class="line"><span class="string">             </span></div><div class="line"><span class="string">             spaceShip.draw(context);</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">         &#125;());</span></div><div class="line"><span class="string">     &#125;</span></div></pre></td></tr></table></figure>
<p>好了，看看是不是挺炫的，现在只要通过键盘上的方向键你就能控制我们的飞船超任意方向移动了。把代码放到你的编辑器中亲手体验一把吧。虽然我们的太空船只是一个简单的多边形，但是它能喷火啊！哈哈！</p>
<p>到这里速度与加速度一章就告一段落了，我们讲解了基本的速度与加速度概念，并且结合前面的三角函数实现了很多不同的效果。简单的示例，是否能够勾起你无限的创造力呢？敬请期待下一章——边界与摩擦力</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/js/">JS</a></li>
         
          <li><a href="/tags/canvas/">Canvas</a></li>
         
          <li><a href="/tags/webgl/">Webgl</a></li>
         
          <li><a href="/tags/vue/">Vue</a></li>
         
          <li><a href="/tags/react/">React</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-加速度基本概念"><span class="toc-number">1.</span> <span class="toc-text">1.加速度基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-沿坐标轴的加速度"><span class="toc-number">2.</span> <span class="toc-text">2.沿坐标轴的加速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-任意方向的加速度"><span class="toc-number">3.</span> <span class="toc-text">3.任意方向的加速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-重力加速度"><span class="toc-number">4.</span> <span class="toc-text">4.重力加速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-太空船"><span class="toc-number">5.</span> <span class="toc-text">5.太空船</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&text=每周一点canvas动画--加速度"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&is_video=false&description=每周一点canvas动画--加速度"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=每周一点canvas动画--加速度&body=Check out this article: http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&title=每周一点canvas动画--加速度"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2017/08/19/每周一点canvas动画-加速度/&name=每周一点canvas动画--加速度&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 zhouyufei
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/js/">JS</a></li>
         
          <li><a href="/tags/canvas/">Canvas</a></li>
         
          <li><a href="/tags/webgl/">Webgl</a></li>
         
          <li><a href="/tags/vue/">Vue</a></li>
         
          <li><a href="/tags/react/">React</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


